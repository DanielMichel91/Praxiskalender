<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Praxiskalender</title>

  <!-- Meta / Sharing -->
  <meta name="description" content="Praxiskalender – die flexible Kalender-App für Praxen. Demo testen, Preise & Funktionen.">
  <meta property="og:title" content="Praxiskalender">
  <meta property="og:description" content="Individuell & effizient – optimieren Sie Ihre Terminplanung.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://praxiskalender.de/">
  <meta property="og:image" content="/og-image.jpg">
  <link rel="icon" href="/favicon.ico">

  <!-- Immer ganz oben starten -->
  <script>
    if ('scrollRestoration' in history) {
      history.scrollRestoration = 'manual';
      window.scrollTo(0,0);
    }
  </script>

  <!-- Lokale Schrift (statt externer Google-Fonts) -->
  <!-- Lege die WOFF2-Dateien unter /fonts/ ab oder passe die Pfade an -->
  <style>
    @font-face{
      font-family:'Inter';
      font-style:normal;
      font-weight:100 900;
      font-display:swap;
      src: url('/fonts/Inter-VariableFont.woff2') format('woff2-variations'),
           url('/fonts/Inter-VariableFont.woff2') format('woff2');
    }
    :root{
      --brand:#0077cc; --brand-light:#2196f3; --bg:#f4f7fa; --card-bg:#fff; --text:#333; --radius:12px;
      --logo-size:140px;
      --brand-weak: rgba(0,119,204,.22);
      --brand-weak-hover: rgba(0,119,204,.4);
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    html{scroll-behavior:smooth; overflow-anchor:none;}
    body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased;}

    [data-reveal]{opacity:0;transform:translateY(32px);transition:opacity .7s cubic-bezier(.4,0,.2,1),transform .7s cubic-bezier(.4,0,.2,1);}
    [data-reveal].is-visible{opacity:1;transform:none;}

    /* Header */
    header{
      background:none;
      padding:0 1rem .75rem;
      color:#fff;
      position:relative; overflow:hidden; text-align:center;
    }
    header::before, header::after{
      content:"";
      position:absolute; left:0; top:0; width:100%;
      height:150px;
      pointer-events:none; z-index:0;
    }
    header::before{ background:linear-gradient(135deg,var(--brand) 0%,var(--brand-light) 100%); }
    header::after{ background:url('hero-wave.svg') bottom/cover no-repeat; }

    .header-content{
      position:relative; z-index:1;
      display:flex; flex-direction:row; align-items:center; justify-content:center;
      gap:1rem; flex-wrap:wrap; max-width:1100px; margin:0 auto;
    }
    .header-content img{width:200px; height:200px; transform:translateY(-6px); aspect-ratio:1.6/1;}
    .header-text{ text-align:left; }
    .header-text h1{font-size:2.4rem; font-weight:700; line-height:1.2; margin-bottom:.35rem;}
    .header-text p{font-size:1.2rem; opacity:.95;}

    /* Layout */
    main{margin-top:0;}
    .container{
      max-width:1100px; margin:0 auto 3rem; padding:2rem 1rem;
      background:var(--card-bg); border-radius:var(--radius); box-shadow:0 8px 30px rgba(0,0,0,.06);
      text-align:center;
    }
    section{margin-bottom:2.5rem;}
    h2{color:var(--brand); font-size:1.75rem; margin-bottom:1.1rem; font-weight:600;}

    /* Features */
    .features{display:flex; justify-content:center;}
    .features ul{list-style:none; margin:0; padding:0; display:inline-block; text-align:left;}
    .features li{position:relative; padding-left:1.5rem; margin:.5rem 0;}
    .features li::before{content:"✔"; position:absolute; left:0; top:0; color:var(--brand); font-weight:700; line-height:1;}

    /* CTA */
    .cta{text-align:center;}
    .cta-copy p{margin:0;}
    .demo-row{ margin-top:1rem; display:inline-flex; align-items:center; gap:1rem; flex-wrap:wrap; justify-content:center; }
    .demo-logo{width:var(--logo-size); height:auto;}
    .download-btn{
      display:inline-block; text-decoration:none; font-weight:600; font-size:1.125rem;
      padding:.9rem 2rem; border-radius:50px; transition:background .25s ease;
      background:#fff; color:var(--brand); border:2px solid var(--brand); white-space:nowrap;
    }
    .download-btn:hover{background:var(--brand-light); color:#fff;}

    /* Gallery */
    .gallery{ margin-top:2rem; text-align:center; }
    .gallery .subtitle{ margin-top:-.35rem; color:#6b7280; }

    .screenshot-grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:1rem;
      margin-top:1.25rem;
    }
    .screenshot{
      position:relative; overflow:hidden; border-radius:var(--radius);
      background:#fff; box-shadow:0 8px 30px rgba(0,0,0,.06);
      cursor:zoom-in; transition:transform .25s ease, border-color .25s ease;
      display:flex; flex-direction:column;
      border:2px solid var(--brand-weak);
    }
    .screenshot:hover{ transform:translateY(-2px); border-color:var(--brand-weak-hover); }
    .screenshot img{
      width:100%; height:200px; object-fit:cover; display:block; transition:transform .35s ease;
    }
    .screenshot.wide img{ height:160px; }
    .screenshot:hover img{ transform:scale(1.03); }
    .screenshot .cap{
      padding:.6rem .8rem; border-top:1px solid #eef2f7; font-size:.9rem; color:#4b5563; text-align:left;
    }

    /* Lightbox */
    .lightbox{
      position:fixed; inset:0; padding:3vh 3vw; background:rgba(0,0,0,.88);
      display:flex; align-items:center; justify-content:center;
      visibility:hidden; opacity:0; transition:opacity .25s ease, visibility .25s ease; z-index:1000;
    }
    .lightbox.open{ visibility:visible; opacity:1; }
    .lightbox img{
      max-width:min(92vw,1100px); max-height:80vh;
      border-radius:14px; box-shadow:0 20px 80px rgba(0,0,0,.55); margin:0 64px;
    }
    .lightbox .lb-caption{
      position:absolute; bottom:18px; left:50%; transform:translateX(-50%);
      color:#fff; background:rgba(0,0,0,.45); padding:.55rem .85rem; border-radius:10px;
      font-size:.95rem; max-width:92vw; text-align:center;
    }
    .lightbox .lb-close{
      position:absolute; top:10px; right:14px; background:transparent; border:0; color:#fff; font-size:2rem; line-height:1; cursor:pointer;
    }
    .lightbox .lb-prev, .lightbox .lb-next{
      position:absolute; top:50%; transform:translateY(-50%);
      background:transparent; border:0; color:#fff; font-size:3rem; line-height:1; cursor:pointer; opacity:.9; padding:.25rem .5rem;
    }
    .lightbox .lb-prev{ left:14px; }
    .lightbox .lb-next{ right:14px; }
    .lightbox .lb-prev[disabled], .lightbox .lb-next[disabled]{ opacity:.35; cursor:default; pointer-events:none; }

    /* Pricing */
    .pricing{ text-align:center; }
    .price-grid{
      display:flex; gap:1rem; justify-content:center; align-items:stretch; flex-wrap:wrap; margin-top:.75rem;
    }
    .price-card{
      background:#fff; border:2px solid var(--brand-weak); border-radius:var(--radius);
      padding:1rem 1.25rem; min-width:240px; box-shadow:0 8px 30px rgba(0,0,0,.06);
      position:relative; transition:border-color .25s ease, transform .25s ease;
    }
    .price-card:hover{ border-color:var(--brand-weak-hover); transform:translateY(-2px); }
    .price-card .price{ font-size:2rem; font-weight:700; color:var(--brand); }
    .price-card .price span{ font-size:1rem; font-weight:600; color:#4b5563; margin-left:.25rem; }
    .price-card.highlight{ border-color:var(--brand); }
    .price-card .badge{
      position:absolute; top:-10px; right:-10px; background:var(--brand); color:#fff; font-weight:700; font-size:.85rem;
      padding:.25rem .5rem; border-radius:999px; box-shadow:0 6px 16px rgba(0,0,0,.15);
    }

    /* Formular */
    .form{ text-align:left; }
    .form .form-grid{ display:grid; gap:1rem; grid-template-columns:1fr 1fr; }
    .form .field{ display:flex; flex-direction:column; }
    .form label{ font-weight:600; margin-bottom:.35rem; }
    .form input[type="text"],
    .form input[type="email"]{
      padding:.7rem .8rem; border-radius:10px; border:2px solid var(--brand-weak);
      outline:none; font:inherit; transition:border-color .2s ease, box-shadow .2s ease; background:#fff;
    }
    .form input:focus{ border-color:var(--brand); box-shadow:0 0 0 3px rgba(0,119,204,.15); }
    .radio-group{
      display:flex; gap:1rem; align-items:center; flex-wrap:wrap;
      border:2px solid var(--brand-weak); border-radius:10px; padding:.6rem .8rem; background:#fff;
    }
    .form .actions{ margin-top:1rem; display:flex; gap:.75rem; align-items:center; justify-content:flex-end; }
    .primary-btn{
      display:inline-block; border:none; cursor:pointer; font-weight:700;
      padding:.9rem 1.4rem; border-radius:50px; background:var(--brand); color:#fff;
      transition:opacity .2s ease, transform .2s ease;
    }
    .primary-btn:hover{ opacity:.95; transform:translateY(-1px); }
    .ghost-btn{
      background:#fff; color:var(--brand); border:2px solid var(--brand); padding:.75rem 1.2rem; border-radius:50px; cursor:pointer; font-weight:700;
    }
    .form .hint{ color:#6b7280; font-size:.9rem; margin-top:.5rem; }
    .alert{ margin-top:.75rem; font-size:.95rem; }
    .alert.success{ color:#0a7a3d; }
    .alert.error{ color:#b91c1c; }

    /* Modals */
    .modal-overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      display:none; align-items:center; justify-content:center; z-index:1100;
    }
    .modal-overlay.active{ display:flex; }
    .modal{
      background:#fff; width:min(90%,700px); max-height:80vh; overflow:auto; border-radius:var(--radius);
      padding:2rem; position:relative; box-shadow:0 8px 24px rgba(0,0,0,.18);
    }
    .modal h2{margin-bottom:1rem; color:var(--brand);}
    .modal h3{margin:.75rem 0 .35rem; color:#0d6efd; font-size:1.05rem;}
    .modal-close{position:absolute; top:.75rem; right:.75rem; background:none; border:none; font-size:1.75rem; cursor:pointer; color:var(--brand);}
    .modal p{margin-bottom:1rem; font-size:.95rem; white-space:pre-line;}
    .modal ul{margin:.25rem 0 1rem 1.25rem;}

    footer{text-align:center; padding:2rem 1rem; font-size:.9rem; color:#888;}
    footer a{color:var(--brand); text-decoration:none; margin:0 .25rem; font-weight:600;}

    /* Tablet */
    @media (max-width:900px){
      header::before, header::after{ height:170px; }
      .screenshot-grid{ grid-template-columns:repeat(2, 1fr); }
      .screenshot img{ height:180px; }
      .screenshot.wide img{ height:140px; }
      .form .form-grid{ grid-template-columns:1fr; }
    }

    /* Mobile */
    @media(max-width:650px){
      .header-content{ gap:.2rem; }
      .header-text{ text-align:center; }
      .header-text h1{font-size:2rem;}
      .header-text p{font-size:1.05rem;}
      .header-content img{ transform:translateY(32px); }
      .demo-logo{width:110px;}
      .download-btn{width:100%;}
      .demo-row{ justify-content:center;}
      header::before, header::after{ height:320px; }

      .screenshot-grid{
        display:flex;
        gap:.75rem;
        overflow-x:auto;
        padding-inline:0;
        scroll-snap-type:x mandatory;
        -webkit-overflow-scrolling:touch;
        scroll-behavior:smooth;
        overscroll-behavior-x: contain;
        overflow-anchor: none;
      }
      .screenshot{ scroll-snap-align:start; flex: 0 0 85%; }
      .screenshot-grid::-webkit-scrollbar{ display:none; }
      .screenshot-grid{ scrollbar-width:none; }
      .screenshot-grid.no-snap{ scroll-snap-type:none !important; }

      .screenshot img{ height:200px; }
      .screenshot.wide img{ height:160px; }

      .price-grid{ gap:.75rem; }
      .price-card{ min-width:260px; }

      .form .actions{ justify-content:stretch; }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content" data-reveal>
      <img src="Logo white.png" alt="Kalender-App Logo" width="200" height="120">
      <div class="header-text">
        <h1>Individuell &amp; effizient</h1>
        <p>Optimieren Sie Ihre Terminplanung</p>
      </div>
    </div>
  </header>

  <main id="appMain">
    <div class="container" data-reveal style="transition-delay:.15s">
      <section>
        <h2>Was diese Kalender-App besonders macht</h2>
        <div class="features">
          <ul>
            <li data-reveal style="transition-delay:.2s">Individuelle Anpassung an Ihre Praxisbedürfnisse</li>
            <li data-reveal style="transition-delay:.3s">Einzeltermine teilen – einfach per Mail oder WhatsApp</li>
            <li data-reveal style="transition-delay:.4s">Automatische Zeit- und Preisberechnung je nach Behandlung</li>
            <li data-reveal style="transition-delay:.5s">Einnahmenübersicht als PDF-Download</li>
            <li data-reveal style="transition-delay:.6s">Termine exportieren &amp; in andere Kalender importieren</li>
          </ul>
        </div>
      </section>

      <section class="cta" data-reveal style="transition-delay:.25s">
        <div class="cta-copy">
          <h2>Testen Sie die kostenfreie Demo-App</h2>
          <p>Erleben Sie alle Funktionen live – ohne Registrierung und Verpflichtungen.</p>
        </div>
        <div class="demo-row">
          <img src="demo-logo.png" alt="Demo App Symbol" class="demo-logo" width="140" height="140">
          <!-- download entfernt, da meist wirkungslos bei Cross-Origin -->
          <a href="###DEMO_LINK###" class="download-btn" id="demoButton">Demo herunterladen</a>
        </div>
      </section>
    </div>

    <!-- Screenshots / Galerie -->
    <div class="container" data-reveal style="transition-delay:.35s">
      <section class="gallery" id="screens">
        <h2>Einblicke in die App</h2>

        <div class="screenshot-grid" id="shotGrid">
          <div class="screenshot" data-src="desktop-header.jpeg" data-caption="Startbildschirm">
            <img src="desktop-header.jpeg" alt="Startbildschirm – Desktop" loading="lazy" width="600" height="200">
            <div class="cap">Startbildschirm</div>
          </div>
          <div class="screenshot" data-src="mobile-month.jpeg" data-caption="Monatsansicht">
            <img src="mobile-month.jpeg" alt="Monatsansicht – Mobile" loading="lazy" width="600" height="200">
            <div class="cap">Monatsansicht</div>
          </div>
          <div class="screenshot" data-src="mobile-day.jpeg" data-caption="Tagesansicht">
            <img src="mobile-day.jpeg" alt="Tagesansicht – Mobile" loading="lazy" width="600" height="200">
            <div class="cap">Tagesansicht</div>
          </div>
          <div class="screenshot" data-src="mobile-revenue.jpeg" data-caption="Einnahmen – Aktueller Monat &amp; Gesamteinnahmen, Export als PDF/CSV.">
            <img src="mobile-revenue.jpeg" alt="Einnahmen – Mobile" loading="lazy" width="600" height="200">
            <div class="cap">Einnahmen</div>
          </div>
          <div class="screenshot" data-src="mobile-add.jpeg" data-caption="Termin hinzufügen">
            <img src="mobile-add.jpeg" alt="Termin hinzufügen – Mobile" loading="lazy" width="600" height="200">
            <div class="cap">Termin hinzufügen</div>
          </div>
          <div class="screenshot" data-src="mobile-drawer.jpeg" data-caption="Navigation">
            <img src="mobile-drawer.jpeg" alt="Navigation – Mobile" loading="lazy" width="600" height="200">
            <div class="cap">Navigation</div>
          </div>
        </div>
      </section>
    </div>

    <!-- Preise -->
    <div class="container" data-reveal style="transition-delay:.45s">
      <section class="pricing" id="preise">
        <h2>Preise – Vollversion <small style="font-weight:600;color:#6b7280">nur für Unternehmen</small></h2>
        <div class="price-grid">
          <div class="price-card">
            <div class="price">ab 10&nbsp;€<span>/Monat zzgl. USt.</span></div>
          </div>
          <div class="price-card highlight">
            <div class="badge">−16,66&nbsp;%</div>
            <div class="price">ab 100&nbsp;€<span>/Jahr zzgl. USt.</span></div>
          </div>
        </div>

        <div style="margin-top:1.25rem;">
          <button class="download-btn" data-open="anfrageModal" type="button">Vollversion anfragen</button>
        </div>
      </section>
    </div>
  </main>

  <!-- Impressum Modal -->
  <div id="impressumModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="impressumTitle" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" data-close="impressumModal" aria-label="Schließen">&times;</button>
      <h2 id="impressumTitle">Impressum</h2>
      <p><strong>Anbieter</strong><br>Daniel Michel<br>Asternweg 1<br>32339 Espelkamp</p>
      <p><strong>Kontakt</strong><br>E-Mail: <a href="mailto:michel.daniel@gmx.net">michel.daniel@gmx.net</a><br>(oder über das Anfrageformular)</p>
      <p><strong>Verantwortlich i.S.d. § 18 Abs. 2 MStV</strong><br>Daniel Michel</p>
      <!-- Optional: nur einfügen, wenn vorhanden
      <p><strong>USt-ID</strong>: DE…</p>
      -->
      <p><strong>Geltungsbereich</strong><br>Diese Angaben gelten für die Website praxiskalender.de und die zugehörige Kalender-App.</p>
    </div>
  </div>

  <!-- Datenschutz (Website) Modal -->
  <div id="datenschutzSiteModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="datenschutzSiteTitle" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" data-close="datenschutzSiteModal" aria-label="Schließen">&times;</button>
      <h2 id="datenschutzSiteTitle">Datenschutzerklärung (Website)</h2>
      <p><strong>Verantwortlicher</strong><br>Daniel Michel, Asternweg 1, 32339 Espelkamp, E-Mail: <a href="mailto:michel.daniel@gmx.net">michel.daniel@gmx.net</a></p>
      <h3>1. Hosting/Server-Protokolle</h3>
      <p>Beim Aufruf dieser Website werden technisch notwendige Daten (z.&nbsp;B. IP-Adresse, Datum/Uhrzeit, Referrer, User-Agent) in Server-Logs verarbeitet, um die Auslieferung der Seite sicherzustellen und Missbrauch zu verhindern. Rechtsgrundlage ist Art. 6 Abs. 1 lit. f DSGVO (berechtigtes Interesse an einer sicheren und funktionsfähigen Website). Logs werden vom Hoster nach den dort üblichen Fristen gelöscht.</p>
      <h3>2. Externe Ressourcen/Cookies</h3>
      <p>Es werden keine Tracking-Cookies eingesetzt. Web-Schriftarten werden lokal eingebunden; es erfolgt kein Abruf von Google-Fonts-Servern.</p>
      <h3>3. Kontakt/Anfrageformular</h3>
      <p>Bei Nutzung des Anfrageformulars verarbeiten wir Ihre Angaben (Anrede, Name, E-Mail, Unternehmer-Bestätigung) zur Bearbeitung Ihrer Anfrage. Rechtsgrundlage ist Art. 6 Abs. 1 lit. b DSGVO (vorvertragliche Maßnahmen) oder lit. f DSGVO (berechtigtes Interesse an effizienter Kommunikation). Empfänger können Auftragsverarbeiter sein (z.&nbsp;B. Hosting-/Mail-Dienstleister). Daten werden gelöscht, sobald die Anfrage abschließend bearbeitet ist und keine gesetzlichen Aufbewahrungspflichten entgegenstehen.</p>
      <h3>4. Ihre Rechte</h3>
      <p>Sie haben Rechte auf Auskunft, Berichtigung, Löschung, Einschränkung, Datenübertragbarkeit und Widerspruch. Zudem besteht ein Beschwerderecht bei einer Datenschutz-Aufsichtsbehörde.</p>
      <p style="color:#6b7280">Stand: 23.08.2025</p>
    </div>
  </div>

  <!-- Datenschutz (Vollversion) Modal -->
  <div id="datenschutzModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="datenschutzTitle" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" data-close="datenschutzModal" aria-label="Schließen">&times;</button>
      <h2 id="datenschutzTitle">Datenschutzhinweise (App – Vollversion)</h2>
      <p><strong>Rollen</strong><br>Die nutzende Praxis ist Verantwortliche i.S.d. DSGVO. Wir verarbeiten personenbezogene Daten <em>als Auftragsverarbeiter</em> gem. Art. 28 DSGVO in Ihrem Auftrag. Eine AVV wird bereitgestellt.</p>
      <p><strong>Zweck der Verarbeitung</strong><br>Bereitstellung der Kalender-Funktionen (Terminverwaltung, Kundenverwaltung, Abrechnung/Reports) im Auftrag der Praxis.</p>
      <p><strong>Kategorien personenbezogener Daten</strong><br>- Kundenname<br>- Name der Mitarbeiterin/des Mitarbeiters<br>- Behandlungsart (kann Gesundheitsbezug haben)<br>- Terminzeiten<br>- Preis<br>- Nutzer-Identifikator (z.&nbsp;B. Firebase UID)</p>
      <p><strong>Speicherung/Hosting</strong><br>Die Daten werden in Google Firebase (Cloud Firestore) in EU-Regionen gespeichert. Unterauftragsverarbeiter werden in der AVV/offenen Liste benannt.</p>
      <p><strong>Rechtsgrundlagen</strong><br>Die Praxis stellt die Rechtsgrundlagen sicher (z.&nbsp;B. Art. 6 Abs. 1 lit. b DSGVO; bei Gesundheitsbezug regelmäßig Art. 9 Abs. 2 lit. h DSGVO i.V.m. berufsrechtlicher Verschwiegenheit).</p>
      <p><strong>Datensicherheit</strong><br>HTTPS-Transport, Firestore Security Rules, Zugriffskontrolle, TOMs gemäß Art. 32 DSGVO.</p>
      <p><strong>Drittlandübermittlungen</strong><br>Sofern Support/Telemetrie Dienste in Drittländern einbeziehen, werden geeignete Garantien (z.&nbsp;B. EU-US Data Privacy Framework bzw. EU-Standardvertragsklauseln) eingesetzt.</p>
      <p><strong>Löschung</strong><br>Nach Vertragsende auf Wunsch Export/Löschung; automatische Löschung spätestens 30 Tage nach Vertragsende.</p>
      <p style="color:#6b7280">Stand: 23.08.2025</p>
    </div>
  </div>

  <!-- Datenschutz (Demo) Modal -->
  <div id="datenschutzDemoModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="datenschutzDemoTitle" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" data-close="datenschutzDemoModal" aria-label="Schließen">&times;</button>
      <h2 id="datenschutzDemoTitle">Datenschutzhinweise (Demo-App)</h2>
      <h3>1. Verantwortlicher & Zweck</h3>
      <p>Verantwortlich: Daniel Michel (siehe Impressum). Verarbeitung ausschließlich zu Demozwecken lokal auf Ihrem Gerät.</p>
      <h3>2. Verarbeitete Daten</h3>
      <ul>
        <li>Kundenname</li>
        <li>Name der Mitarbeiterin / des Mitarbeiters</li>
        <li>Behandlungsart</li>
        <li>Terminbeginn und -ende</li>
        <li>Preis</li>
        <li>(optional) Logo & abgeleitete Akzentfarbe</li>
        <li>(optional) exportierte Dateien (ICS/PDF/CSV)</li>
      </ul>
      <p><em>Hinweis:</em> Keine Firebase-UID, keine Analysedaten, keine Serverübertragung.</p>
      <h3>3. Speicherung</h3>
      <ul>
        <li>App-Speicher (Termine, Einstellungen)</li>
        <li>Dateisystem (nur bei aktivem Export)</li>
      </ul>
      <h3>4. Rechtsgrundlagen</h3>
      <p>Art. 6 Abs. 1 lit. b DSGVO (Bereitstellung/Test) und ggf. lit. f (berechtigtes Interesse an einer funktionsfähigen Demo). Sie können durch Zurücksetzen/Deinstallation lokal gespeicherte Daten entfernen.</p>
      <h3>5. Berechtigungen</h3>
      <ul>
        <li>Dateizugriff (Export ICS/PDF/CSV)</li>
        <li>Medien (Logo auswählen)</li>
      </ul>
      <h3>6. Löschung</h3>
      <ul>
        <li><strong>In-App:</strong> „App zurücksetzen“</li>
        <li><strong>Exportdateien:</strong> manuell löschen</li>
        <li><strong>Deinstallation:</strong> entfernt App-Daten (Exportdateien bleiben, bis Sie sie löschen)</li>
      </ul>
      <p style="color:#6b7280">Stand: 23.08.2025</p>
    </div>
  </div>

  <!-- Anfrage-Modal -->
  <div id="anfrageModal" class="modal-overlay" role="dialog" aria-modal="true" aria-labelledby="anfrageTitle" aria-hidden="true">
    <div class="modal">
      <button class="modal-close" data-close="anfrageModal" aria-label="Schließen">&times;</button>
      <h2 id="anfrageTitle">Vollversion anfragen</h2>
      <form id="anfrageForm" class="form" novalidate>
        <!-- Honeypot (Bots füllen das aus) -->
        <input type="text" name="company" autocomplete="organization" tabindex="-1" aria-hidden="true" style="position:absolute; left:-9999px; width:1px; height:1px; opacity:0;">

        <div class="field">
          <label for="anrede">Anrede</label>
          <div class="radio-group" id="anrede" role="radiogroup" aria-label="Anrede">
            <label><input type="radio" name="anrede" value="Herr" required> Herr</label>
            <label><input type="radio" name="anrede" value="Frau" required> Frau</label>
          </div>
        </div>

        <div class="form-grid" style="margin-top:1rem;">
          <div class="field">
            <label for="vorname">Vorname</label>
            <input id="vorname" name="vorname" type="text" autocomplete="given-name" required placeholder="Max" maxlength="60">
          </div>
          <div class="field">
            <label for="nachname">Nachname</label>
            <input id="nachname" name="nachname" type="text" autocomplete="family-name" required placeholder="Mustermann" maxlength="60">
          </div>
          <div class="field" style="grid-column:1/-1;">
            <label for="email">E-Mail</label>
            <input id="email" name="email" type="email" autocomplete="email" required placeholder="name@beispiel.de" maxlength="120">
          </div>
        </div>

        <!-- B2B-Bestätigung -->
        <div class="field" style="margin-top:.5rem;">
          <label class="checkbox">
            <input id="b2b" name="b2b" type="checkbox" required>
            Ich handle als Unternehmer i.S.d. § 14 BGB.
          </label>
        </div>

        <div class="actions">
          <button type="button" class="ghost-btn" data-close="anfrageModal">Abbrechen</button>
          <button id="submitBtn" type="submit" class="primary-btn">Anfrage absenden</button>
        </div>

        <div id="formAlert" class="alert" role="status" aria-live="polite" style="display:none;"></div>
        <p class="hint">
          Mit Absenden verarbeiten wir Ihre Angaben zur Bearbeitung Ihrer Anfrage
          (Rechtsgrundlage: Art. 6 Abs. 1 lit. b DSGVO; ggf. lit. f).
          Weitere Infos: <a href="#" data-open="datenschutzSiteModal">Datenschutz (Website)</a>.
        </p>
      </form>
    </div>
  </div>

  <footer>
    &copy; 2025 Praxiskalender&nbsp;|&nbsp;
    <a href="#" data-open="impressumModal">Impressum</a>&nbsp;|&nbsp;
    <a href="#" data-open="datenschutzSiteModal">Datenschutz (Website)</a>&nbsp;|&nbsp;
    <a href="#" data-open="datenschutzModal">Datenschutz (Vollversion)</a>&nbsp;|&nbsp;
    <a href="#" data-open="datenschutzDemoModal">Datenschutz (Demo)</a>
  </footer>

  <!-- Lightbox -->
  <div id="lightbox" class="lightbox" aria-modal="true" role="dialog" aria-hidden="true">
    <button class="lb-close" aria-label="Schließen">&times;</button>
    <button class="lb-prev" aria-label="Vorheriges Bild">‹</button>
    <img alt="">
    <button class="lb-next" aria-label="Nächstes Bild">›</button>
    <div class="lb-caption"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded',()=>{
      window.scrollTo(0,0);
      window.addEventListener('pageshow', (e)=>{ if(e.persisted) window.scrollTo(0,0); });

      // Reveal
      const revealEls=document.querySelectorAll('[data-reveal]');
      const observer=new IntersectionObserver((entries,obs)=>{
        entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('is-visible'); obs.unobserve(e.target); }});
      },{threshold:.2});
      revealEls.forEach(el=>observer.observe(el));

      // Focus-Trap für Modals (A11y)
      const main = document.getElementById('appMain');
      let lastTrigger = null;
      function openModalById(id){
        const el=document.getElementById(id);
        if(!el) return;
        lastTrigger = document.querySelector(`[data-open="${id}"]`) || document.activeElement;
        el.classList.add('active'); el.setAttribute('aria-hidden','false');
        main?.setAttribute('inert','');
        const focusable = el.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');
        focusable[0]?.focus();
        function trap(e){
          if(!el.classList.contains('active')) return;
          if(e.key !== 'Tab') return;
          const nodes = Array.from(focusable).filter(n=>!n.hasAttribute('disabled'));
          if(nodes.length===0) return;
          const first = nodes[0], last = nodes[nodes.length - 1];
          if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
          else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
        }
        el._trap = trap;
        document.addEventListener('keydown', trap);
      }
      function closeModalById(id){
        const el=document.getElementById(id);
        if(!el) return;
        el.classList.remove('active'); el.setAttribute('aria-hidden','true');
        document.removeEventListener('keydown', el._trap || (()=>{}));
        main?.removeAttribute('inert');
        lastTrigger?.focus?.();
      }

      // Modal Handling
      const openLinks=document.querySelectorAll('[data-open]');
      const closeEls=document.querySelectorAll('[data-close]');
      openLinks.forEach(link=>{
        link.addEventListener('click',e=>{
          e.preventDefault();
          const id=e.currentTarget.getAttribute('data-open');
          openModalById(id);
        });
      });
      closeEls.forEach(btn=>{
        btn.addEventListener('click',()=>{
          const id=btn.getAttribute('data-close');
          closeModalById(id);
        });
      });
      document.querySelectorAll('.modal-overlay').forEach(overlay=>{
        overlay.addEventListener('click',e=>{ if(e.target===overlay){ overlay.classList.remove('active'); overlay.setAttribute('aria-hidden','true'); main?.removeAttribute('inert'); }});
      });

      // Lightbox
      const shots = Array.from(document.querySelectorAll('#shotGrid .screenshot'));
      const lb = document.getElementById('lightbox');
      const lbImg = lb.querySelector('img');
      const lbCap = lb.querySelector('.lb-caption');
      const btnPrev = lb.querySelector('.lb-prev');
      const btnNext = lb.querySelector('.lb-next');
      const btnClose = lb.querySelector('.lb-close');
      let idx = 0;

      function updateArrows(){ btnPrev.disabled = (idx === 0); btnNext.disabled = (idx === shots.length - 1); }
      function openAt(i){
        idx = Math.max(0, Math.min(i, shots.length - 1));
        const item = shots[idx];
        const src = item.getAttribute('data-src') || item.querySelector('img')?.src;
        if(!src){ return; }
        lbImg.src = src;
        lbImg.alt = item.querySelector('img')?.alt || 'Screenshot';
        lbCap.textContent = item.getAttribute('data-caption') || item.querySelector('.cap')?.textContent || '';
        lb.classList.add('open');
        lb.setAttribute('aria-hidden','false');
        updateArrows();
      }
      function next(){ if (idx < shots.length - 1) openAt(idx + 1); }
      function prev(){ if (idx > 0) openAt(idx - 1); }
      function closeLB(){ lb.classList.remove('open'); lb.setAttribute('aria-hidden','true'); }

      shots.forEach((el,i)=> el.addEventListener('click',()=>openAt(i)));
      btnNext.addEventListener('click', next);
      btnPrev.addEventListener('click', prev);
      btnClose.addEventListener('click', closeLB);
      lb.addEventListener('click', e=>{ if(e.target===lb) closeLB(); });
      document.addEventListener('keydown', e=>{
        if(lb.classList.contains('open')){
          if(e.key==='Escape') closeLB();
          if(e.key==='ArrowRight') next();
          if(e.key==='ArrowLeft') prev();
        }
      });

      // Mobile-Karussell beim ersten Item starten
      const grid = document.getElementById('shotGrid');
      const mq = window.matchMedia('(max-width:650px)');
      function snapToFirstHard(){
        if(!grid) return;
        if(!mq.matches){ grid.scrollLeft = 0; return; }
        grid.classList.add('no-snap');
        grid.scrollLeft = 0;
        requestAnimationFrame(()=> requestAnimationFrame(()=>{ grid.classList.remove('no-snap'); }));
      }
      function initCarouselStart(){
        if(!grid) return;
        if(mq.matches) snapToFirstHard();
      }
      initCarouselStart();
      window.addEventListener('load', initCarouselStart);
      window.addEventListener('resize', initCarouselStart);
      window.addEventListener('orientationchange', initCarouselStart);
      window.addEventListener('pageshow', (e)=>{ if(e.persisted) initCarouselStart(); });
      if(grid){
        const imgs = grid.querySelectorAll('img');
        let pending = 0;
        imgs.forEach(img=>{
          if(!img.complete){
            pending++;
            img.addEventListener('load', ()=>{ pending--; if(pending===0) initCarouselStart(); }, {once:true});
          }
        });
        if(pending===0) initCarouselStart();
        setTimeout(initCarouselStart, 300);
      }

      /* -------- Formular: serverseitig senden -------- */
      const anfrageModal = document.getElementById('anfrageModal');
      const form = document.getElementById('anfrageForm');
      const alertEl = document.getElementById('formAlert');
      const submitBtn = document.getElementById('submitBtn');

      function showAlert(msg, type){
        alertEl.textContent = msg;
        alertEl.className = 'alert ' + (type || '');
        alertEl.style.display = 'block';
      }
      function clearAlert(){
        alertEl.textContent = '';
        alertEl.className = 'alert';
        alertEl.style.display = 'none';
      }

      form?.addEventListener('submit', async (e)=>{
        e.preventDefault();
        clearAlert();

        const data = {
          anrede: form.anrede?.value || '',
          vorname: form.vorname?.value?.trim() || '',
          nachname: form.nachname?.value?.trim() || '',
          email: form.email?.value?.trim() || '',
          b2b: form.b2b?.checked ? 'true' : 'false',
          company: form.company?.value?.trim() || '' // honeypot
        };

        // einfache Client-Validierung
        if(!data.anrede || !data.vorname || !data.nachname || !data.email){
          form.reportValidity && form.reportValidity();
          return;
        }
        if(data.b2b !== 'true'){
          showAlert('Bitte bestätigen Sie, dass Sie als Unternehmer nach § 14 BGB handeln.', 'error');
          const b2b = document.getElementById('b2b');
          b2b?.focus();
          return;
        }

        submitBtn.disabled = true;
        submitBtn.textContent = 'Senden...';

        try{
          // Falls Backend auf anderer Domain läuft: komplette URL hier eintragen
          const res = await fetch('/api/send-request', {
            method: 'POST',
            headers: {'Content-Type':'application/json'},
            body: JSON.stringify(data),
          });

          const json = await res.json().catch(()=> ({}));
          if(!res.ok){
            throw new Error(json?.error || 'Senden fehlgeschlagen.');
          }

          showAlert('Danke! Ihre Anfrage wurde erfolgreich versendet.', 'success');
          form.reset();
          // Modal nach kurzer Zeit schließen
          setTimeout(()=>{
            anfrageModal?.classList.remove('active');
            anfrageModal?.setAttribute('aria-hidden','true');
            clearAlert();
          }, 1200);
        }catch(err){
          showAlert(err.message || 'Es ist ein Fehler aufgetreten.', 'error');
        }finally{
          submitBtn.disabled = false;
          submitBtn.textContent = 'Anfrage absenden';
        }
      });
    });
  </script>
</body>
</html>
